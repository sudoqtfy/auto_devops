
<div class="page-content">
    <div class="page-header">
        <h1>
            系统管理
            <small>
                <i class="icon-double-angle-right"></i>
               数据库管理
            </small>
            <button type="button" class="btn btn-success btn-sm pull-right"
              data-toggle="modal"
              data-remote="{% url 'modal_form' app='sysapp' form_name='dbserver' %}"
              data-target="#large-modal">
              <i class="icon-pencil align-top bigger-125"></i>添加数据库
            </button>
        </h1>
    </div><!-- /.page-header -->

    <div class="row">
        <div class="col-xs-12">
            <!-- PAGE CONTENT BEGINS -->

            <div class="row">
                <div class="col-xs-12">
                    <div class="table-responsive">
                        <table id="sample-table-1" class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th class="center">
                                        <label>
                                            <input type="checkbox" class="ace">
                                            <span class="lbl"></span>
                                        </label>
                                    </th>
                                    <th class="center">数据库名</th>
                                    <th class="center">ip地址</th>
                                    <th class="center">端口</th>

                                    <th class="center">
                                        用户名
                                    </th>
                                    <th class="center">连接状态</th>
                                    <th class="center">所属产品</th>
                                    <th class="center">所属版本</th>
                                    <th class="center">所属项目</th>

                                    <th></th>
                                </tr>
                            </thead>

                            <tbody>
                                {% for d in posts %}
                                <tr>
                                    <td class="center">
                                        <label>
                                            <input type="checkbox" class="ace">
                                            <span class="lbl"></span>
                                        </label>
                                    </td>

                                    <td class="center">
                                        <a href="#">{{ d.dbname }}</a>
                                    </td>
                                    <td class="center">{{ d.dbhost }}</td>
                                    <td class="center">{{ d.dbport }}</td>
                                    <td class="center">{{ d.dbuser }}</td>
                                    <td class="center">
                                        {% if d.dbstatus == 0 %}
                                        <span class="label label-info arrowed-in-right arrowed">正在连接</span>
                                        {% elif d.dbstatus == 1 %}
                                            <span class="label label-success arrowed">连接成功</span> 
                                        {% elif d.dbstatus == 2 %}
                                        <span class="label label-danger arrowed-in">连接失败</span>
                                        {% endif %}
                                    </td>

                                    <td class="center">
                                        {{ d.product }}
                                    </td>
                                    <td class="center">
                                        {{ d.product.version }}
                                    </td>
                                    <td class="center">
                                        {{ d.product.version.project }}
                                    </td>

                                    <td class="hidden-480 center">
                                        <div class="visible-md visible-lg hidden-sm hidden-xs btn-group">
                                            <button  type="submit" data-toggle="modal"  data-remote="{% url 'modal_form' app='sysapp' form_name='dbserver' id=d.id %}" data-target="#large-modal" class="btn btn-xs btn-info">
                                                <i class="icon-edit bigger-150"></i>
                                            </button>
                                            <button onclick="delete_modal_form('{% url 'modal_delete' app='sysapp' form_name='dbserver' id=d.id %}')"  class="btn btn-xs btn-danger">
                                                <i class="icon-trash bigger-150"></i>
                                            </button>
                                        </div>

                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div><!-- /.table-responsive -->
                </div><!-- /span -->
            </div><!-- /row -->
            {% include 'page.html' %}
            </div><!-- PAGE CONTENT ENDS -->
        </div><!-- /.col -->
    </div><!-- /.row -->
</div>
